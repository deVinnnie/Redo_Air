<ui:composition template="/WEB-INF/master.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:define name="body">
        <!-- Languager Selector -->
        <h:form id="langauge_form">
            <ul id="dropdown1" class="dropdown-content">
                <c:forEach items="#{languageBean.locales}" var="lan" varStatus="loop">
                    <c:choose>
                        <c:when test="#{lan.language eq languageBean.language}">
                            <li class="active">
                                <i class="material-icons left">chevron_right</i>
                                <span>
                                    <h:outputFormat value="#{msg[lan.language]}"/>
                                </span>
                            </li>
                        </c:when>
                        <c:otherwise>
                            <li>
                                <h:commandLink action="#{languageBean.changeLanguage(lan.language)}"
                                               value="#{msg[lan.language]}" />
                            </li>
                        </c:otherwise>
                    </c:choose>
                </c:forEach>
            </ul>
        </h:form>

        <!-- User dropdown -->
        <h:form>
            <ul id="user-dropdown" class="dropdown-content">
                <li>
                    <a href="#!">
                        My bookings
                    </a>
                </li>

                <li>
                    <h:commandLink action="#{loginBean.logout}">
                        Log out
                    </h:commandLink>
                </li>
            </ul>
        </h:form>

        <nav class="light-green darken-4" role="navigation">
            <div class="nav-wrapper container">
                <h:link outcome="/index.xhtml" id="logo-container" styleClass="brand-logo">ReDo Air</h:link>

                <ul class="right hide-on-med-and-down">
                    <li>
                        <a class="dropdown-button" href="#!" data-activates="dropdown1">
                            <h:outputFormat value="#{msg['lang.title']}"/>
                            <i class="material-icons right">arrow_drop_down</i>
                        </a>
                    </li>

                    <h:panelGroup>
                        <li>
                            <h:link outcome="/redo-customer/index.xhtml" rendered="#{empty request.userPrincipal}">
                                Log in
                            </h:link>

                            <h:panelGroup rendered="#{not empty request.userPrincipal}">
                                <a class="dropdown-button" href="#!" data-activates="user-dropdown">
                                    <i class="material-icons left">person</i>
                                    <h:outputText value="#{request.userPrincipal.name}"/>
                                    <i class="material-icons right">arrow_drop_down</i>
                                </a>
                            </h:panelGroup>
                        </li>
                    </h:panelGroup>
                </ul>

                <ul id="nav-mobile" class="side-nav">
                    <li><a href="#">Log in</a></li>
                </ul>
                <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>
            </div>
        </nav>

        <div class="section no-pad-bot" id="index-banner">
            <div class="container">
                <h1>
                    <ui:insert name="pageTitle">
                        ReDo Air
                    </ui:insert>
                </h1>


            </div>
        </div>

        <div class="container">
            <c:if test="#{not empty flash.error}">
                <div class="errorMessage">
                    #{flash.error}
                </div>
            </c:if>

            <main>
                <ui:insert name="content">
                    Lorem Ipsum
                </ui:insert>
            </main>
        </div>

        <footer class="page-footer  light-green darken-1">
            <div class="container">
                <div class="row">
                    <div class="col l6 s12">
                        <h5 class="white-text">Company Bio</h5>
                        <p class="grey-text text-lighten-4">Copyright RealDolmen. All rights reserved.</p>
                    </div>

                    <div class="col l3 s12">
                        <h5 class="white-text">Settings</h5>
                        <ul>
                            <li><a class="white-text" href="#!">Link 1</a></li>
                            <li><a class="white-text" href="#!">Link 2</a></li>
                            <li><a class="white-text" href="#!">Link 3</a></li>
                            <li><a class="white-text" href="#!">Link 4</a></li>
                        </ul>
                    </div>
                    <div class="col l3 s12"></div>
                </div>
            </div>

            <div class="footer-copyright"></div>
        </footer>
    </ui:define>
</ui:composition>